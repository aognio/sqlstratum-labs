{% extends "base.html" %}
{% block title %}{{ event.title }} · BookingLab{% endblock %}
{% block content %}
<div class="mb-6">
  <a href="/" class="text-sm text-slate-500 hover:text-slate-700">← Back to events</a>
</div>

<div class="grid lg:grid-cols-3 gap-6">
  <div class="lg:col-span-2 space-y-4">
    <div class="bg-white border rounded-lg p-6">
      <div class="text-sm text-slate-500">{{ event.starts_at.strftime('%b %d, %Y %I:%M %p') }} · {{ event.location or 'TBA' }}</div>
      <h1 class="text-2xl font-semibold mt-1">{{ event.title }}</h1>
      <p class="text-slate-600 mt-3">{{ event.description }}</p>
      <div class="mt-4 grid md:grid-cols-3 gap-3 text-sm">
        <div class="bg-slate-50 border rounded-lg p-3">
          <div class="text-xs uppercase tracking-wide text-slate-500">Capacity</div>
          <div class="text-lg font-semibold">{{ event.capacity }}</div>
        </div>
        <div class="bg-slate-50 border rounded-lg p-3">
          <div class="text-xs uppercase tracking-wide text-slate-500">Booked</div>
          <div class="text-lg font-semibold">{{ event.seats_booked }}</div>
        </div>
        <div class="bg-slate-50 border rounded-lg p-3">
          <div class="text-xs uppercase tracking-wide text-slate-500">Remaining</div>
          <div class="text-lg font-semibold">{{ event.remaining_capacity }}</div>
        </div>
      </div>
    </div>
  </div>

  <div>
    <div class="bg-white border rounded-lg p-6">
      <div class="text-sm text-slate-500">Price per seat</div>
      <div class="text-2xl font-semibold mb-4">${{ '%.2f' | format(event.price_cents / 100) }}</div>

      {% if error %}
        <div class="bg-red-50 text-red-700 text-sm border border-red-200 rounded-md p-3 mb-4">{{ error }}</div>
      {% endif %}

      <form method="post" action="/events/{{ event.slug }}/book" class="space-y-3">
        <div>
          <label class="text-xs uppercase tracking-wide text-slate-500">Full name</label>
          <input name="full_name" value="{{ form_data.full_name if form_data and form_data.full_name else '' }}" class="mt-1 w-full border rounded-md px-3 py-2" required />
        </div>
        <div>
          <label class="text-xs uppercase tracking-wide text-slate-500">Email</label>
          <input name="email" type="email" value="{{ form_data.email if form_data and form_data.email else '' }}" class="mt-1 w-full border rounded-md px-3 py-2" required />
        </div>
        <div>
          <label class="text-xs uppercase tracking-wide text-slate-500">Phone (optional)</label>
          <input name="phone" value="{{ form_data.phone if form_data and form_data.phone else '' }}" class="mt-1 w-full border rounded-md px-3 py-2" />
        </div>
        <div>
          <label class="text-xs uppercase tracking-wide text-slate-500">Seats</label>
          <input name="seats" type="number" min="1" max="10" value="{{ form_data.seats if form_data and form_data.seats else 1 }}" class="mt-1 w-full border rounded-md px-3 py-2" required />
        </div>
        <div>
          <label class="text-xs uppercase tracking-wide text-slate-500">Notes</label>
          <textarea name="notes" class="mt-1 w-full border rounded-md px-3 py-2" rows="3">{{ form_data.notes if form_data and form_data.notes else '' }}</textarea>
        </div>
        <button class="w-full bg-slate-900 text-white rounded-md py-2 hover:bg-slate-800">Request booking</button>
        <p class="text-xs text-slate-500 mt-2">Demo-only booking flow. No payments are processed.</p>
      </form>
    </div>
  </div>
</div>
{% endblock %}
