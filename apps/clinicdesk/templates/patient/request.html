{% extends "base.html" %}
{% block title %}Request Appointment · ClinicDesk{% endblock %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Request an Appointment</h1>

<div class="bg-white border rounded-lg p-4 mb-4">
  <form id="request-form" class="grid md:grid-cols-3 gap-3">
    <div>
      <label class="text-xs text-slate-500">Service</label>
      <select name="service_id" class="w-full border rounded px-2 py-1">
        <option value="">Select service</option>
        {% for service in services %}
          <option value="{{ service.id }}">{{ service.name }} ({{ service.duration_min }}m)</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label class="text-xs text-slate-500">Doctor</label>
      <select name="doctor_id" class="w-full border rounded px-2 py-1">
        <option value="any">Any doctor</option>
        {% for doctor in doctors %}
          <option value="{{ doctor.id }}">{{ doctor.full_name }} · {{ doctor.specialty }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label class="text-xs text-slate-500">Day</label>
      <input type="date" name="day" class="w-full border rounded px-2 py-1" />
    </div>
  </form>

  <div class="mt-3">
    <button class="px-3 py-2 border rounded" hx-get="{{ url_for('patient.request_slots') }}" hx-target="#slots" hx-include="#request-form">Find Slots</button>
  </div>
</div>

<div id="book-result"></div>
<div id="slots"></div>
{% endblock %}
