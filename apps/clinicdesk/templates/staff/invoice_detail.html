{% extends "base.html" %}
{% block title %}Invoice Detail Â· ClinicDesk{% endblock %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Invoice #{{ invoice.invoice_id }}</h1>

<div class="bg-white border rounded-lg p-4 mb-4">
  <div class="text-sm text-slate-600">Patient: {{ invoice.patient_name }} ({{ invoice.patient_email }})</div>
  <div class="text-sm text-slate-600">Status: {{ invoice.status }}</div>
  <div class="text-sm text-slate-600">Created: {{ invoice.created_at }}</div>
</div>

<div class="bg-white border rounded-lg p-4 mb-4">
  <h2 class="font-semibold mb-2">Add Line Item</h2>
  <form class="grid md:grid-cols-4 gap-2" hx-post="{{ url_for('staff.add_invoice_item', invoice_id=invoice.invoice_id) }}" hx-target="#invoice-items" hx-swap="innerHTML">
    <input name="description" class="border rounded px-2 py-1" placeholder="Description" required />
    <input name="qty" type="number" value="1" class="border rounded px-2 py-1" />
    <input name="unit_price_cents" type="number" value="0" class="border rounded px-2 py-1" />
    <button class="px-3 py-2 border rounded">Add</button>
  </form>
</div>

<div id="invoice-items">
  {% include "staff/_invoice_items.html" %}
</div>
{% endblock %}
